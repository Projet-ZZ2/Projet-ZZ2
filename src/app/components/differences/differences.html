<h1>Jeu du dÃ©veloppeur</h1>

<p class="intro-text">Bucs a besoin de votre aide pour corriger les erreurs dans son code. Ouvrez les fichiers et suivez les instructions pour rÃ©soudre les problÃ¨mes. 
  Chaque fichier contient une Ã©nigme diffÃ©rente, alors soyez attentif aux dÃ©tails !</p>

<div class="desktop">
  <div class="sidebar">
    <h3>TÃ¢ches systÃ¨me</h3>
    <div class="sidebar-info">SÃ©lectionnez un fichier pour corriger les erreurs.</div>
  </div>

  <div class="main-content">
    <div class="toolbar">
      <div class="address-bar">C:\WINDOWS\system32\drivers\code</div>
    </div>

    <div class="icon-grid">
      <div class="file-icon" (click)="openHelp()">
        <span class="icon">â“</span>
        <span class="label">Aide systÃ¨me</span>
      </div>

      <div *ngFor="let file of differencesService.getIcons()" 
           (click)="openFile(file)" 
           class="file-icon"
           [class.locked]="file.isLocked">
        <span class="icon">ğŸ“„</span>
        <span class="label">{{ file.label }}</span>
        <span *ngIf="file.isResolved">âœ…</span>
      </div>
    </div>
  </div>

  <div class="editor-window" *ngIf="selectedFile">
    <div class="editor-header">
      <span>{{ selectedFile.content?.title }} - Bloc-notes</span>
      <button (click)="selectedFile = null">X</button>
    </div>
    
    <div class="editor-body">
      <div class="instructions" *ngIf="selectedFile.id !== -1">
        <strong>Consigne :</strong> {{ selectedFile.content?.instructions }}
      </div>

      <textarea [(ngModel)]="userCode" [readonly]="selectedFile.id === -1" spellcheck="false"></textarea>
      
      <div class="footer">
        <p class="feedback" 
            *ngIf="selectedFile.id !== -1" 
            [class.error-text]="isError">
            {{ feedback }}
        </p>        
        <div class="button-group">
          <button *ngIf="selectedFile.id !== -1" class="reset-btn" (click)="resetCode()">
            RÃ©initialiser le code
          </button>
          <button *ngIf="selectedFile.id !== -1" class="check-btn" (click)="checkCorrection()">
            VÃ©rifier
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modale de victoire -->
<div class="victory-overlay" *ngIf="isGameWon">
  <div class="victory-modal">
    <h2>ğŸ‰ Bravo ! ğŸ‰</h2>
    <p>Vous avez gagnÃ© ! Tous les fichiers ont Ã©tÃ© restaurÃ©s avec succÃ¨s !</p>
    <button class="continue-btn" (click)="continueToDesktop()">Retour au Bureau</button>
  </div>
</div>